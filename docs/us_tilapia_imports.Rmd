---
title: "us_tilapia_imports"
output: html_document
---

```{r}
library(tidyverse)
library(here)
library(janitor)
```

```{r}
# read in data
us_tilapia_imports <- read_csv(here::here("data", "us_tilapia_imports.csv")) 

# explore data
#summary(us_tilapia_imports)
names(us_tilapia_imports)
dim(us_tilapia_imports)

# reshape data- name column to create and put values from table into (values-to)
reshaped <- us_tilapia_imports %>% pivot_longer(cols = -country, names_to = "year", values_to = "tilapia_imports" )

# check class of year column
class(reshaped$year)

# change year column to numeric class
reshaped <- reshaped %>% 
  dplyr::mutate(year = as.numeric(year)) 

# find total us tilapia imports by year
yearly_tilapia_tot <- reshaped %>% 
  dplyr::group_by(year) %>% 
  dplyr::summarize(annual_total = sum(tilapia_imports, na.rm = TRUE))

# create plot
yearly_tilapia_plot <- ggplot(data = yearly_tilapia_tot, aes(x = year, y = annual_total)) +
  geom_line(color = "blue")+ 
  labs(title = "USDA Economic Research Service Fishing Data",
       x = "Year",
       y = "Total tilapia imports (lbs)")

yearly_tilapia_plot

# export graph
ggsave(here::here("figs", "yearly_tilapia_plot.png"), height = 5, width = 6)

# create subset of imports
yearly_tilapia_subset <- filter()

# create new plot of subsets
```

